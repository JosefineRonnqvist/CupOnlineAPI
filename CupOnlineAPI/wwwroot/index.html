<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" />
 
</head>
<body>
    <div id="cuponline">

        <!--<div id="coming">Kommande cuper</div>
        <div id="ongoing_cups">Pågående cuper</div>
        <div id="ongoing_series">Pågående serier</div>
        <div id="finished">Avslutade cuper</div>
        <div id="latest">Nyligen registrerade cuper</div>
        <div id="searchForm">
            Sökformulär
            <div id="search_cupname"></div>
            <div id="search_organizer"></div>
            <div id="search_city"></div>
            <div id="search_sport"></div>
            <div id="search_year"></div>
            <div id="search_age"></div>
            <div id="search_status"></div>
            <div id="search_button">Search</div>

        </div>
        <div id="search_table">Sökta cuper</div>-->
        <form autocomplete="off" id="order_form">
            <select id="Organizers" name="Organizers" style="width: 300px;"/>
            <input type="text" placeholder="Föreningsnamn" id="order_new_club_name" />
            <select id="Cities" name="Cities" style="width: 300px;"/>
            <!--<input type="text" placeholder="Hemort" id="order_new_club_city" onKeyUp='GetCities(this.value)' />-->
            <div id="getCitiesResult"></div>
            <input type="text" placeholder="Webbsida" id="order_new_club_url" />
            <input type="text" placeholder="Cupnamn" id="order_cup_name" />
            <select id="order_sport"></select>
            <input type="text" placeholder="Spelplats/ort" id="order_city" />
            <input type="text" placeholder="Ålder" id="order_age_text" />
            <div id="order_age_checkbox"></div>
            <input type="date" placeholder="startdatum" id="order_startdate" />
            <input type="date" placeholder="slutdatum" id="order_enddate" />
            <select id="order_cup_type"></select>
            <input type="text" placeholder="Kontaktperson" id="order_contact_name" />
            <input type="text" placeholder="Telefonnummer" id="order_contact_number" />
            <input type="text" placeholder="Mejl" id="order_contact_mail" />
            <textarea id="order_message"></textarea>
            <select id="order_found_cuponline"></select>
            <input type="checkbox" id="order_approval" />
            <div><img id="ctl00_ctl00_ctl00_ctl00_main_main_main_captchaCtrl1_CaptchaImage" src="Core.CaptchaHandler.axd" 
                      alt="This is a Captcha Image" style="height:50px;width:200px;border-width:0px;"></div>
            <div id="order_verify_code"></div>
            <input type="text" placeholder="verifieringskod" id="order_verify_answer" />
            <input name="ctl00$ctl00$ctl00$ctl00$main$main$main$txtCaptcha" type="text" id="ctl00_ctl00_ctl00_ctl00_main_main_main_txtCaptcha" class="input">
            <input type="button" id="order_button" value="Beställ CupOnline" onclick="ClickedOrderCup" />
        </form>

    </div>

    <!--<script src="js/cup_online_start_cups.js" asp-append-version="true"></script>
    <script type="text/javascript">
        GetComing();
        GetOngoingCups();
        GetOngoingSeries();
        GetFinished();
        GetLatest();
    </script>-->
    <!--<script src="js/cup_online_search.js" asp-append-version="true"></script>
    <script type="text/javascript">
        SearchForm();
    </script>-->

    <script src="js/cup_online_order.js" asp-append-version="true"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
    <script type="text/javascript">
        GetOptions();
        //$("body").on('keydown', ".select2,.select2-dropdown", function (e) {
        //    var KEYS = { UP: 38, DOWN: 40 };
        //    var $sel2 = $(this).closest(".select2");
        //    // if we can't find it by traveersing the dom, search page for an open container
        //    // ASSUMES only one open at a time - 
        //    // don't really know how to cross walk from dropdown back to coresponding element
        //    if ($sel2.length == 0) {
        //        $sel2 = $(".select2.select2-container--open");
        //    }

        //    // make sure we found the <select> el
        //    var $sel = $sel2.data("element")
        //    if ($sel.length) {
        //        var newValue

        //        if (e.keyCode === KEYS.DOWN && !e.altKey) {
        //            newValue = $sel.find('option:selected').nextAll(":enabled").first().val();
        //        } else if (e.keyCode === KEYS.UP) {
        //            newValue = $sel.find('option:selected').prevAll(":enabled").first().val();
        //        }

        //        // if we got a value, set it and update
        //        if (newValue != undefined) {
        //            $sel.val(newValue);
        //            $sel.trigger('change');
        //        }
        //    }

        //});
        $(document).ready(function () {
            $("#Organizers").select2({
                language: {
                    searching: function () { return '' },
                    noResults: function () { return '' },
                    errorLoading: function () { return '' }
                },
                multiple: false,
                selectOnClose: true,
                ajax: {
                    url: "https://localhost:7172/api/SearchParam/Organizers",
                    dataType: 'json',
                    method: 'get',
                    delay: 300,
                    data: function (params) {
                        return {
                            clubName: params.term,
                        };
                    },
                    processResults: function (response) {
                        var select2Data = $.map(response, function (obj) {
                            obj.text = obj.club_name;
                            obj.id = obj.club_name;
                            return obj;
                        });

                        return {
                            results: select2Data
                        };
                    }
                },
                placeholder: "Sök klubbar...",
    
            });
        });

      

        $(document).ready(function () {
            $("#Cities").select2({
                language: {
                    searching: function () { return '' },
                    noResults: function () { return '' },
                    errorLoading: function () {return ''}
                },
                multiple: false,
                selectOnClose: true,
                ajax: {
                    url: "https://localhost:7172/api/SearchParam/Cities",
                    dataType: 'json',
                    method: 'get',
                    delay: 300,
                    data: function (params) {
                        return {
                            city: params.term,
                        };
                    },
                    processResults: function (response) {
                        var select2Data = $.map(response, function (obj) {
                            obj.text = obj.city_name;
                            obj.id = obj.city_id;
                            return obj;
                        });

                        return {
                            results: select2Data
                        };
                    }
                },
                placeholder: "Ort",
            });
        });
    </script>

</body>
</html >